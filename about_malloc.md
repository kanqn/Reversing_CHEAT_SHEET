### mallocが一定サイズの場合
#### free_list
・free_listは貸し出すためのメモリ空間をリスト構造で繋がった状態にしておく  
・mallocが呼び出される度にfree_listの先頭から貸し出すメモリを取り出す  
・freeで返却されたメモリは、free_listの先頭につないでおく<br>  
  
    
![free_list](https://www.ei.fukui-nct.ac.jp/wp-content/uploads/2018/01/2018-01-16-freelist.png)  

  
  
### 任意サイズのメモリ確保の場合
・貸し出されるメモリ空間には、ヒープメモリの利用者が使うブロックの前に、  
　次のメモリブロックへのポインタとブロックサイズを記憶する領域をつけておく。  
   
   
・こういったメモリブロックをfree_listの考え方と同じようにリスト構造となるようにつないで保存されている。  
  
  

![heap-malloc](https://www.ei.fukui-nct.ac.jp/wp-content/uploads/2018/01/2018-01-16-heap-malloc.png)

### free()の処理とメモリブロックの併合
・使用されていたメモリブロックがfree()で返却された場合は、free_listにつないでいく。　　

・free()で返却される際は、隣り合うメモリブロックと併合できるかを確認して大きなメモリブロックになるような処理を行う。　　

(この処理を行う理由は、malloc(),free()を繰り返した場合にと小さなメモリブロックになってしまい、大きなmallocができないため)  

・free_listにつなぐ際は、次のメモリブロックへのポインタは、昇順となるように並べられる。　　

